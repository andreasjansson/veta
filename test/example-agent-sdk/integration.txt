%skip(requires OPENAI_API_KEY) if: test -z "$OPENAI_API_KEY"

===
agent adds a note via veta tool
===
cd "$CCTR_TEST_PATH/../../examples/agent-sdk" && TEST_PORT=8788 node test-ws-chat.mjs add "Add a note titled 'CCTR Test' with body 'Hello from test' and tag 'test'. Use addNote tool." "tool-call"
---
ok

===
agent lists notes via veta tool
===
cd "$CCTR_TEST_PATH/../../examples/agent-sdk" && TEST_PORT=8788 node test-ws-chat.mjs list "List all notes using listNotes tool." "tool-call"
---
ok

===
agent shows a note via veta tool
===
cd "$CCTR_TEST_PATH/../../examples/agent-sdk" && TEST_PORT=8788 node test-ws-chat.mjs show "Show note 1 using showNote tool." "tool-call"
---
ok

===
agent searches notes via veta tool
===
cd "$CCTR_TEST_PATH/../../examples/agent-sdk" && TEST_PORT=8788 node test-ws-chat.mjs search "Search notes for 'test' using searchNotes tool." "tool-call"
---
ok
